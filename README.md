Repository for the [plotnine](https://plotnine.org) website.

## Some Quick Links

- [webdev](https://plotnine.org/webdev) - plotnine release docs built with the dev branch of this repo
- [dev](https://plotnine.org/dev) - plotnine main branch docs built with the main branch of this repo
- [staging](https://staging--plotnine.netlify.app/) - Deployment of the plotnine.org staging branch.

## Building the Site

First you should clone the repository and enter the directory

```sh
$ git clone https://github.com/has2k1/plotnine.org.git
$ make submodules
$ cd plotnine.org
```

Then choose which build commands apply to your situation 

### Building the Site From Scratch

This installs the dependencies, generates the interlinks and builds the site. Use this on CI or the first time you are building the documentation.

```sh
$ make site-cold
```

### Rebuilding the Site

If you have the dependencies installed, haven't updated the submodules, the checkout head of the plotnine subpackage hasn't changed.

```sh
$ make site
```

### Checkout a Specific Plotnine Target

You will need to run one of these on CI before building the documentation.

```sh
# Run one of
$ make checkout-release      # latest stable version of plotnine
$ make checkout-pre-release  # latest pre-release version
$ make checkout-main         # main branch
```

### Update the Submodules 

Pull the latest commits in the submodules

```sh
$ make submodules-pull
```

### Build a Specific Version

You should rarely need to do this

```sh
$ pushd plotnine
$ git checkout v0.14.5
$ make site-cold
```

### Preview While Updating the Quarto Content

```sh
$ make preview
```

### In Case of Any Issues, Rebuild from Scratch

This could happen locally 

```sh
$ make clean
$ make homepage
$ make site-cold
```

## More About this Repo

This repository (plotnine.org) includes 3 other sources of documentation.

1. The plotnine repository which has the docstrings that become core documentation and are also collected together under API reference listing.
2. The plotnine-examples repository that has Juptyer notebooks. The notebooks are either picked up and included in the example sections of the rendered docstrings or, the are rendered as pages and listed on the tutorials page.
3. The plotnine-guide repository which has a guide on how to use plotnine.

This repository also contains files that get built into other some the pages on the website. Some pages are elaborately put together and are worth mentioning Two pages are
elaborately put together and those pages are worth mentioning.

### The Homepage

The markdown (`source/index.qmd`) content for the hompeage includes these html files.

1. [source/homepage/header.html](./source/homepage/header.html)
2. [source/homepage/banner/output.html](./source/homepage/banner/output.html)
3. [source/homepage/features/output.html](./source/homepage/features/output.html)
4. [source/homepage/footer.html](./source/homepage/footer.html)

1 (`header.html`) and 4 (`footer.html`) are created manually.
2 (`output.html`) and 3 (`output.html`) are created from the respective Jinja templates.
If the YAML or the python code in the respective subdirectories changes, the output html files should be regenerated.

```sh
$ make homepage
```

### The Gallery Page

The gallery is dynamically generated by collecting some (tagged) outputs Jupyter notebooks in the `plotnine-examples` repository.
We expect the notebooks to have been run and contain the output for each cell.
When building the site we do not run them, but use [scripts/create_gallery.py](./scripts/create_gallery.py) we to look through each notebook and pick out items for the gallery.  

