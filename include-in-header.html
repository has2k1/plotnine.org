<script type="text/javascript">
window.onload = function() {
   // retina display: halve the size of the notebook output images
   // Select all images matching the specific CSS selector
   var images = document.querySelectorAll(".cell-output figure img");

   // Loop through each image and set its size
   images.forEach(function(img) {
      // Ensure the image dimensions are set only after the image
      // has fully loaded
      // Setting both dimensions does not work as expected, so we
      // only the one dimension. The other is automatically adjusted
      // accordingly
      img.onload = function() {
         this.style.width = this.naturalWidth / 2 + "px";
      };

      // If the image is already loaded before the script runs (e.g., cached images),
      // manually trigger the load event.
      if (img.complete) {
         img.onload();
      }
   });
};
</script>
